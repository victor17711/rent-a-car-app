{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"expo-web-browser","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":131},"end":{"line":3,"column":47,"index":178}}],"key":"qFWzf28Sq0474idIhFBHQFboHaY=","exportNames":["*"],"imports":1}},{"name":"expo-linking","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":179},"end":{"line":4,"column":40,"index":219}}],"key":"UOn5wJuCXvTT9EneNUmI6H0GQgM=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":220},"end":{"line":5,"column":80,"index":300}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,_d){\"use strict\";function e(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),t.default=e,t}Object.defineProperty(_e,'__esModule',{value:!0}),_e.AuthProvider=function({children:e}){const[h,d]=(0,t.useState)(null),[f,y]=(0,t.useState)(!0),w=e=>{if(!e)return null;const t=e.match(/#session_id=([^&]+)/);if(t)return t[1];const n=e.match(/[?&]session_id=([^&]+)/);return n?n[1]:null},p=async e=>{try{y(!0);const t=await o.api.exchangeSession(e);t.session_token&&await(0,o.setAuthToken)(t.session_token),t.user&&d(t.user)}catch(e){console.error('Failed to process session:',e)}finally{y(!1)}},v=async()=>{try{if(await(0,o.getAuthToken)()){const e=await o.api.getMe();d(e)}}catch(e){await(0,o.removeAuthToken)()}finally{y(!1)}};(0,t.useEffect)(()=>{(async()=>{await v()})();const e=n.addEventListener('url',async e=>{const t=w(e.url);t&&await p(t)});return()=>{e.remove()}},[]);return(0,s.jsx)(c.Provider,{value:{user:h,isLoading:f,isAuthenticated:!!h,loginWithGoogle:async()=>{try{y(!0);const e=`${l}/`,t=`${u}/?redirect=${encodeURIComponent(e)}`;window.location.href=t}catch(e){console.error('Login error:',e)}finally{y(!1)}},loginWithEmail:async(e,t)=>{try{y(!0);const n=await o.api.login({email:e,password:t});n.session_token&&await(0,o.setAuthToken)(n.session_token),n.user&&d(n.user)}catch(e){throw e}finally{y(!1)}},register:async(e,t,n)=>{try{y(!0);const s=await o.api.register({email:e,password:t,name:n});s.session_token&&await(0,o.setAuthToken)(s.session_token),s.user&&d(s.user)}catch(e){throw e}finally{y(!1)}},logout:async()=>{try{await o.api.logout()}catch(e){console.error('Logout error:',e)}finally{await(0,o.removeAuthToken)(),d(null)}},refreshUser:async()=>{try{const e=await o.api.getMe();d(e)}catch(e){console.error('Failed to refresh user:',e)}},updateUser:e=>{d(e)}},children:e})},_e.useAuth=function(){const e=(0,t.useContext)(c);if(void 0===e)throw new Error('useAuth must be used within an AuthProvider');return e};var t=r(_d[0]);r(_d[1]);e(r(_d[2]));var n=e(r(_d[3])),o=r(_d[4]),s=r(_d[5]);const c=(0,t.createContext)(void 0),u='https://auth.emergentagent.com',l=process.env.EXPO_PUBLIC_BACKEND_URL||'https://rentalfleet-9.preview.emergentagent.com'});","lineCount":1,"map":[[1,327,25,0,"_e"],[1,330,25,0,"AuthProvider"],[1,343,25,7],[1,353,25,29,"children"],[1,362,25,31,"children"],[1,366,26,2],[1,372,26,9,"user"],[1,374,26,15,"setUser"],[1,378,26,26],[1,380,26,26,"useState"],[1,382,26,34,"useState"],[1,392,26,48],[1,399,27,9,"isLoading"],[1,401,27,20,"setIsLoading"],[1,405,27,36],[1,407,27,36,"useState"],[1,409,27,44,"useState"],[1,420,27,45],[1,423,29,8,"extractSessionId"],[1,425,29,28,"url"],[1,429,30,4],[1,433,30,9,"url"],[1,435,30,14],[1,442,30,21],[1,447,33,4],[1,453,33,10,"hashMatch"],[1,455,33,22,"url"],[1,457,33,26,"match"],[1,463,33,32],[1,486,34,4],[1,489,34,8,"hashMatch"],[1,491,34,19],[1,498,34,26,"hashMatch"],[1,500,34,36],[1,503,37,4],[1,509,37,10,"queryMatch"],[1,511,37,23,"url"],[1,513,37,27,"match"],[1,519,37,33],[1,545,38,4],[1,552,38,8,"queryMatch"],[1,554,38,27,"queryMatch"],[1,556,38,38],[1,559,40,11],[1,565,43,8,"processSessionId"],[1,567,43,27,"async"],[1,577,44,4],[1,581,45,6,"setIsLoading"],[1,584,45,19],[1,587,46,6],[1,593,46,12,"result"],[1,601,46,27,"api"],[1,603,46,30,"api"],[1,607,46,31,"exchangeSession"],[1,623,46,47,"sessionId"],[1,626,47,10,"result"],[1,628,47,17,"session_token"],[1,649,48,14],[1,651,48,14,"setAuthToken"],[1,653,48,26,"setAuthToken"],[1,667,48,27,"result"],[1,669,48,34,"session_token"],[1,684,50,10,"result"],[1,686,50,17,"user"],[1,692,51,8,"setUser"],[1,694,51,16,"result"],[1,696,51,23,"user"],[1,701,53,4],[1,702,53,6],[1,708,53,13,"error"],[1,711,54,6,"console"],[1,719,54,14,"error"],[1,725,54,20],[1,754,54,50,"error"],[1,756,55,4],[1,757,55,5],[1,765,56,6,"setIsLoading"],[1,768,56,19],[1,770,57,4],[1,773,60,8,"checkExistingSession"],[1,775,60,31,"async"],[1,785,61,4],[1,789,63,6],[1,798,62,26],[1,800,62,26,"getAuthToken"],[1,802,62,38,"getAuthToken"],[1,818,63,17],[1,819,64,8],[1,825,64,14,"userData"],[1,833,64,31,"api"],[1,835,64,34,"api"],[1,839,64,35,"getMe"],[1,847,65,8,"setUser"],[1,849,65,16,"userData"],[1,851,66,6],[1,852,67,4],[1,853,67,6],[1,859,67,13,"error"],[1,868,68,12],[1,870,68,12,"removeAuthToken"],[1,872,68,27,"removeAuthToken"],[1,890,69,4],[1,891,69,5],[1,899,70,6,"setIsLoading"],[1,902,70,19],[1,904,71,4],[1,908,74,2],[1,910,74,2,"useEffect"],[1,912,74,11,"useEffect"],[1,923,74,12],[1,928,75,17,"async"],[1,945,99,12,"checkExistingSession"],[1,950,102,4,"init"],[1,953,105,4],[1,959,105,10,"subscription"],[1,961,105,25,"Linking"],[1,963,105,33,"addEventListener"],[1,980,105,50],[1,986,105,57,"async"],[1,996,106,6],[1,1002,106,12,"sessionId"],[1,1004,106,24,"extractSessionId"],[1,1006,106,41,"event"],[1,1008,106,47,"url"],[1,1013,107,10,"sessionId"],[1,1022,108,14,"processSessionId"],[1,1024,108,31,"sessionId"],[1,1029,112,4],[1,1035,112,11],[1,1040,113,6,"subscription"],[1,1042,113,19,"remove"],[1,1053,115,5],[1,1057,204,2],[1,1064,205,4],[1,1066,205,4,"_reactJsxRuntime"],[1,1068,205,4,"jsx"],[1,1073,205,5,"AuthContext"],[1,1075,205,17,"Provider"],[1,1084,205,25],[1,1085,206,6,"value"],[1,1091,206,13],[1,1092,207,8,"user"],[1,1099,208,8,"isLoading"],[1,1111,209,8,"isAuthenticated"],[1,1129,209,27,"user"],[1,1131,210,8,"loginWithGoogle"],[1,1147,117,26,"async"],[1,1157,118,4],[1,1161,119,6,"setIsLoading"],[1,1164,119,19],[1,1167,121,6],[1,1173,121,12,"redirectUrl"],[1,1175,122,10],[1,1178,122,13,"BACKEND_URL"],[1,1183,125,12,"authUrl"],[1,1185,125,22],[1,1188,125,25,"AUTH_URL"],[1,1203,125,47,"encodeURIComponent"],[1,1222,125,66,"redirectUrl"],[1,1227,128,8,"window"],[1,1234,128,15,"location"],[1,1243,128,24,"href"],[1,1248,128,31,"authUrl"],[1,1249,139,4],[1,1250,139,6],[1,1256,139,13,"error"],[1,1259,140,6,"console"],[1,1267,140,14,"error"],[1,1273,140,20],[1,1288,140,36,"error"],[1,1290,141,4],[1,1291,141,5],[1,1299,142,6,"setIsLoading"],[1,1302,142,19],[1,1304,143,4],[1,1307,211,8,"loginWithEmail"],[1,1322,146,25,"async"],[1,1328,146,32,"email"],[1,1330,146,47,"password"],[1,1335,147,4],[1,1339,148,6,"setIsLoading"],[1,1342,148,19],[1,1345,149,6],[1,1351,149,12,"result"],[1,1359,149,27,"api"],[1,1361,149,30,"api"],[1,1365,149,31,"login"],[1,1371,149,37],[1,1372,149,39,"email"],[1,1380,149,46,"password"],[1,1393,150,10,"result"],[1,1395,150,17,"session_token"],[1,1416,151,14],[1,1418,151,14,"setAuthToken"],[1,1420,151,26,"setAuthToken"],[1,1434,151,27,"result"],[1,1436,151,34,"session_token"],[1,1451,153,10,"result"],[1,1453,153,17,"user"],[1,1459,154,8,"setUser"],[1,1461,154,16,"result"],[1,1463,154,23,"user"],[1,1468,156,4],[1,1469,156,6],[1,1475,156,13,"error"],[1,1478,157,6],[1,1484,157,12,"error"],[1,1485,158,4],[1,1486,158,5],[1,1494,159,6,"setIsLoading"],[1,1497,159,19],[1,1499,160,4],[1,1502,212,8,"register"],[1,1511,163,19,"async"],[1,1517,163,26,"email"],[1,1519,163,41,"password"],[1,1521,163,59,"name"],[1,1526,164,4],[1,1530,165,6,"setIsLoading"],[1,1533,165,19],[1,1536,166,6],[1,1542,166,12,"result"],[1,1550,166,27,"api"],[1,1552,166,30,"api"],[1,1556,166,31,"register"],[1,1565,166,40],[1,1566,166,42,"email"],[1,1574,166,49,"password"],[1,1585,166,59,"name"],[1,1594,167,10,"result"],[1,1596,167,17,"session_token"],[1,1617,168,14],[1,1619,168,14,"setAuthToken"],[1,1621,168,26,"setAuthToken"],[1,1635,168,27,"result"],[1,1637,168,34,"session_token"],[1,1652,170,10,"result"],[1,1654,170,17,"user"],[1,1660,171,8,"setUser"],[1,1662,171,16,"result"],[1,1664,171,23,"user"],[1,1669,173,4],[1,1670,173,6],[1,1676,173,13,"error"],[1,1679,174,6],[1,1685,174,12,"error"],[1,1686,175,4],[1,1687,175,5],[1,1695,176,6,"setIsLoading"],[1,1698,176,19],[1,1700,177,4],[1,1703,213,8,"logout"],[1,1710,180,17,"async"],[1,1720,181,4],[1,1730,182,12,"api"],[1,1732,182,15,"api"],[1,1736,182,16,"logout"],[1,1744,183,4],[1,1745,183,6],[1,1751,183,13,"error"],[1,1754,184,6,"console"],[1,1762,184,14,"error"],[1,1768,184,20],[1,1784,184,37,"error"],[1,1786,185,4],[1,1787,185,5],[1,1801,186,12],[1,1803,186,12,"removeAuthToken"],[1,1805,186,27,"removeAuthToken"],[1,1824,187,6,"setUser"],[1,1826,187,14],[1,1831,188,4],[1,1834,214,8,"refreshUser"],[1,1846,191,22,"async"],[1,1856,192,4],[1,1860,193,6],[1,1866,193,12,"userData"],[1,1874,193,29,"api"],[1,1876,193,32,"api"],[1,1880,193,33,"getMe"],[1,1888,194,6,"setUser"],[1,1890,194,14,"userData"],[1,1892,195,4],[1,1893,195,6],[1,1899,195,13,"error"],[1,1902,196,6,"console"],[1,1910,196,14,"error"],[1,1916,196,20],[1,1942,196,47,"error"],[1,1944,197,4],[1,1947,215,8,"updateUser"],[1,1958,200,22,"userData"],[1,1962,201,4,"setUser"],[1,1964,201,12,"userData"],[1,1969,216,8,"children"],[1,1978,218,7,"children"],[1,1981,221,0],[1,1983,223,0,"_e"],[1,1986,223,0,"useAuth"],[1,1994,223,7],[1,2005,224,2],[1,2011,224,8,"context"],[1,2014,224,18],[1,2016,224,18,"useContext"],[1,2018,224,28,"useContext"],[1,2030,224,29,"AuthContext"],[1,2033,225,2],[1,2041,225,18,"undefined"],[1,2045,225,6,"context"],[1,2047,226,4],[1,2053,226,10],[1,2057,226,14,"Error"],[1,2063,226,20],[1,2110,228,2],[1,2117,228,9,"context"],[1,2118,229,0],[1,2120,1,0],[1,2124,1,0,"_react"],[1,2126,1,0,"r"],[1,2128,1,0,"_d"],[1,2131,1,0],[1,2135,1,89,"r"],[1,2137,1,89,"_d"],[1,2140,1,89],[1,2144,3,0,"_interopNamespace"],[1,2146,3,0,"r"],[1,2148,3,0,"_d"],[1,2151,3,0],[1,2160,4,0,"Linking"],[1,2162,4,0,"_interopNamespace"],[1,2164,4,0,"r"],[1,2166,4,0,"_d"],[1,2169,4,0],[1,2174,5,0,"_utilsApi"],[1,2176,5,0,"r"],[1,2178,5,0,"_d"],[1,2181,5,0],[1,2185,5,80,"_reactJsxRuntime"],[1,2187,5,80,"r"],[1,2189,5,80,"_d"],[1,2192,5,80],[1,2196,20,0],[1,2202,20,6,"AuthContext"],[1,2205,20,20],[1,2207,20,20,"createContext"],[1,2209,20,33,"createContext"],[1,2229,20,63,"undefined"],[1,2232,22,6,"AUTH_URL"],[1,2234,22,17],[1,2267,23,6,"BACKEND_URL"],[1,2269,23,20,"process"],[1,2277,23,28,"env"],[1,2281,23,32,"EXPO_PUBLIC_BACKEND_URL"],[1,2306,23,59],[1,2355,229,1],[1,2358]],"functionMap":{"names":["<global>","AuthProvider","extractSessionId","processSessionId","checkExistingSession","useEffect$argument_0","init","Linking.addEventListener$argument_1","<anonymous>","loginWithGoogle","loginWithEmail","register","logout","refreshUser","updateUser","useAuth"],"mappings":"AAA;OCwB;2BCI;GDY;2BEE;GFe;+BGE;GHY;YIE;iBCC;KDyB;yDEK;KFK;WGE;KHE;GJC;0BQE;GR2B;yBSE;GTe;mBUE;GVe;iBWE;GXS;sBYE;GZO;qBaE;GbE;CDmB;OeE;CfM"},"hasCjsExports":false},"type":"js/module"}]}