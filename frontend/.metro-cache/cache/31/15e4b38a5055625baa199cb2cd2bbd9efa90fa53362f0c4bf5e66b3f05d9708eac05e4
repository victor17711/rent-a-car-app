{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"expo-web-browser","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":131},"end":{"line":3,"column":47,"index":178}}],"key":"qFWzf28Sq0474idIhFBHQFboHaY=","exportNames":["*"],"imports":1}},{"name":"expo-linking","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":179},"end":{"line":4,"column":40,"index":219}}],"key":"UOn5wJuCXvTT9EneNUmI6H0GQgM=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":220},"end":{"line":5,"column":80,"index":300}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,_d){\"use strict\";function e(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),t.default=e,t}Object.defineProperty(_e,'__esModule',{value:!0}),_e.AuthProvider=function({children:e}){const[h,d]=(0,t.useState)(null),[w,f]=(0,t.useState)(!0),y=e=>{if(!e)return null;const t=e.match(/#session_id=([^&]+)/);if(t)return t[1];const n=e.match(/[?&]session_id=([^&]+)/);return n?n[1]:null},p=async e=>{try{f(!0);const t=await o.api.exchangeSession(e);t.session_token&&await(0,o.setAuthToken)(t.session_token),t.user&&d(t.user)}catch(e){console.error('Failed to process session:',e)}finally{f(!1)}},v=async()=>{try{if(await(0,o.getAuthToken)()){const e=await o.api.getMe();d(e)}}catch(e){await(0,o.removeAuthToken)()}finally{f(!1)}};(0,t.useEffect)(()=>{(async()=>{if('undefined'!=typeof window&&window.location.hash){const e=y(window.location.hash);if(e)return window.history.replaceState(null,'',window.location.pathname),void await p(e)}await v()})();const e=n.addEventListener('url',async e=>{const t=y(e.url);t&&await p(t)});return()=>{e.remove()}},[]);return(0,s.jsx)(c.Provider,{value:{user:h,isLoading:w,isAuthenticated:!!h,loginWithGoogle:async()=>{try{f(!0);const e=`${l}/`,t=`${u}/?redirect=${encodeURIComponent(e)}`;window.location.href=t}catch(e){console.error('Login error:',e)}finally{f(!1)}},loginWithEmail:async(e,t)=>{try{f(!0);const n=await o.api.login({email:e,password:t});n.session_token&&await(0,o.setAuthToken)(n.session_token),n.user&&d(n.user)}catch(e){throw e}finally{f(!1)}},register:async(e,t,n)=>{try{f(!0);const s=await o.api.register({email:e,password:t,name:n});s.session_token&&await(0,o.setAuthToken)(s.session_token),s.user&&d(s.user)}catch(e){throw e}finally{f(!1)}},logout:async()=>{try{await o.api.logout()}catch(e){console.error('Logout error:',e)}finally{await(0,o.removeAuthToken)(),d(null)}},refreshUser:async()=>{try{const e=await o.api.getMe();d(e)}catch(e){console.error('Failed to refresh user:',e)}},updateUser:e=>{d(e)}},children:e})},_e.useAuth=function(){const e=(0,t.useContext)(c);if(void 0===e)throw new Error('useAuth must be used within an AuthProvider');return e};var t=r(_d[0]);r(_d[1]);e(r(_d[2]));var n=e(r(_d[3])),o=r(_d[4]),s=r(_d[5]);const c=(0,t.createContext)(void 0),u='https://auth.emergentagent.com',l=\"https://rentalfleet-9.preview.emergentagent.com\"});","lineCount":1,"map":[[1,327,25,0,"_e"],[1,330,25,0,"AuthProvider"],[1,343,25,7],[1,353,25,29,"children"],[1,362,25,31,"children"],[1,366,26,2],[1,372,26,9,"user"],[1,374,26,15,"setUser"],[1,378,26,26],[1,380,26,26,"useState"],[1,382,26,34,"useState"],[1,392,26,48],[1,399,27,9,"isLoading"],[1,401,27,20,"setIsLoading"],[1,405,27,36],[1,407,27,36,"useState"],[1,409,27,44,"useState"],[1,420,27,45],[1,423,29,8,"extractSessionId"],[1,425,29,28,"url"],[1,429,30,4],[1,433,30,9,"url"],[1,435,30,14],[1,442,30,21],[1,447,33,4],[1,453,33,10,"hashMatch"],[1,455,33,22,"url"],[1,457,33,26,"match"],[1,463,33,32],[1,486,34,4],[1,489,34,8,"hashMatch"],[1,491,34,19],[1,498,34,26,"hashMatch"],[1,500,34,36],[1,503,37,4],[1,509,37,10,"queryMatch"],[1,511,37,23,"url"],[1,513,37,27,"match"],[1,519,37,33],[1,545,38,4],[1,552,38,8,"queryMatch"],[1,554,38,27,"queryMatch"],[1,556,38,38],[1,559,40,11],[1,565,43,8,"processSessionId"],[1,567,43,27,"async"],[1,577,44,4],[1,581,45,6,"setIsLoading"],[1,584,45,19],[1,587,46,6],[1,593,46,12,"result"],[1,601,46,27,"api"],[1,603,46,30,"api"],[1,607,46,31,"exchangeSession"],[1,623,46,47,"sessionId"],[1,626,47,10,"result"],[1,628,47,17,"session_token"],[1,649,48,14],[1,651,48,14,"setAuthToken"],[1,653,48,26,"setAuthToken"],[1,667,48,27,"result"],[1,669,48,34,"session_token"],[1,684,50,10,"result"],[1,686,50,17,"user"],[1,692,51,8,"setUser"],[1,694,51,16,"result"],[1,696,51,23,"user"],[1,701,53,4],[1,702,53,6],[1,708,53,13,"error"],[1,711,54,6,"console"],[1,719,54,14,"error"],[1,725,54,20],[1,754,54,50,"error"],[1,756,55,4],[1,757,55,5],[1,765,56,6,"setIsLoading"],[1,768,56,19],[1,770,57,4],[1,773,60,8,"checkExistingSession"],[1,775,60,31,"async"],[1,785,61,4],[1,789,63,6],[1,798,62,26],[1,800,62,26,"getAuthToken"],[1,802,62,38,"getAuthToken"],[1,818,63,17],[1,819,64,8],[1,825,64,14,"userData"],[1,833,64,31,"api"],[1,835,64,34,"api"],[1,839,64,35,"getMe"],[1,847,65,8,"setUser"],[1,849,65,16,"userData"],[1,851,66,6],[1,852,67,4],[1,853,67,6],[1,859,67,13,"error"],[1,868,68,12],[1,870,68,12,"removeAuthToken"],[1,872,68,27,"removeAuthToken"],[1,890,69,4],[1,891,69,5],[1,899,70,6,"setIsLoading"],[1,902,70,19],[1,904,71,4],[1,908,74,2],[1,910,74,2,"useEffect"],[1,912,74,11,"useEffect"],[1,923,74,12],[1,928,75,17,"async"],[1,939,88,8],[1,942,88,30],[1,962,88,19,"window"],[1,970,88,45,"window"],[1,977,88,52,"location"],[1,986,88,61,"hash"],[1,991,88,67],[1,992,89,10],[1,998,89,16,"sessionId"],[1,1000,89,28,"extractSessionId"],[1,1002,89,45,"window"],[1,1009,89,52,"location"],[1,1018,89,61,"hash"],[1,1024,90,10],[1,1027,90,14,"sessionId"],[1,1029,93,12],[1,1036,91,12,"window"],[1,1043,91,19,"history"],[1,1051,91,27,"replaceState"],[1,1064,91,40],[1,1069,91,46],[1,1072,91,50,"window"],[1,1079,91,57,"location"],[1,1088,91,66,"pathname"],[1,1109,92,18,"processSessionId"],[1,1111,92,35,"sessionId"],[1,1113,95,8],[1,1120,99,12,"checkExistingSession"],[1,1125,102,4,"init"],[1,1128,105,4],[1,1134,105,10,"subscription"],[1,1136,105,25,"Linking"],[1,1138,105,33,"addEventListener"],[1,1155,105,50],[1,1161,105,57,"async"],[1,1171,106,6],[1,1177,106,12,"sessionId"],[1,1179,106,24,"extractSessionId"],[1,1181,106,41,"event"],[1,1183,106,47,"url"],[1,1188,107,10,"sessionId"],[1,1197,108,14,"processSessionId"],[1,1199,108,31,"sessionId"],[1,1204,112,4],[1,1210,112,11],[1,1215,113,6,"subscription"],[1,1217,113,19,"remove"],[1,1228,115,5],[1,1232,204,2],[1,1239,205,4],[1,1241,205,4,"_reactJsxRuntime"],[1,1243,205,4,"jsx"],[1,1248,205,5,"AuthContext"],[1,1250,205,17,"Provider"],[1,1259,205,25],[1,1260,206,6,"value"],[1,1266,206,13],[1,1267,207,8,"user"],[1,1274,208,8,"isLoading"],[1,1286,209,8,"isAuthenticated"],[1,1304,209,27,"user"],[1,1306,210,8,"loginWithGoogle"],[1,1322,117,26,"async"],[1,1332,118,4],[1,1336,119,6,"setIsLoading"],[1,1339,119,19],[1,1342,121,6],[1,1348,121,12,"redirectUrl"],[1,1350,122,10],[1,1353,122,13,"BACKEND_URL"],[1,1358,125,12,"authUrl"],[1,1360,125,22],[1,1363,125,25,"AUTH_URL"],[1,1378,125,47,"encodeURIComponent"],[1,1397,125,66,"redirectUrl"],[1,1402,128,8,"window"],[1,1409,128,15,"location"],[1,1418,128,24,"href"],[1,1423,128,31,"authUrl"],[1,1424,139,4],[1,1425,139,6],[1,1431,139,13,"error"],[1,1434,140,6,"console"],[1,1442,140,14,"error"],[1,1448,140,20],[1,1463,140,36,"error"],[1,1465,141,4],[1,1466,141,5],[1,1474,142,6,"setIsLoading"],[1,1477,142,19],[1,1479,143,4],[1,1482,211,8,"loginWithEmail"],[1,1497,146,25,"async"],[1,1503,146,32,"email"],[1,1505,146,47,"password"],[1,1510,147,4],[1,1514,148,6,"setIsLoading"],[1,1517,148,19],[1,1520,149,6],[1,1526,149,12,"result"],[1,1534,149,27,"api"],[1,1536,149,30,"api"],[1,1540,149,31,"login"],[1,1546,149,37],[1,1547,149,39,"email"],[1,1555,149,46,"password"],[1,1568,150,10,"result"],[1,1570,150,17,"session_token"],[1,1591,151,14],[1,1593,151,14,"setAuthToken"],[1,1595,151,26,"setAuthToken"],[1,1609,151,27,"result"],[1,1611,151,34,"session_token"],[1,1626,153,10,"result"],[1,1628,153,17,"user"],[1,1634,154,8,"setUser"],[1,1636,154,16,"result"],[1,1638,154,23,"user"],[1,1643,156,4],[1,1644,156,6],[1,1650,156,13,"error"],[1,1653,157,6],[1,1659,157,12,"error"],[1,1660,158,4],[1,1661,158,5],[1,1669,159,6,"setIsLoading"],[1,1672,159,19],[1,1674,160,4],[1,1677,212,8,"register"],[1,1686,163,19,"async"],[1,1692,163,26,"email"],[1,1694,163,41,"password"],[1,1696,163,59,"name"],[1,1701,164,4],[1,1705,165,6,"setIsLoading"],[1,1708,165,19],[1,1711,166,6],[1,1717,166,12,"result"],[1,1725,166,27,"api"],[1,1727,166,30,"api"],[1,1731,166,31,"register"],[1,1740,166,40],[1,1741,166,42,"email"],[1,1749,166,49,"password"],[1,1760,166,59,"name"],[1,1769,167,10,"result"],[1,1771,167,17,"session_token"],[1,1792,168,14],[1,1794,168,14,"setAuthToken"],[1,1796,168,26,"setAuthToken"],[1,1810,168,27,"result"],[1,1812,168,34,"session_token"],[1,1827,170,10,"result"],[1,1829,170,17,"user"],[1,1835,171,8,"setUser"],[1,1837,171,16,"result"],[1,1839,171,23,"user"],[1,1844,173,4],[1,1845,173,6],[1,1851,173,13,"error"],[1,1854,174,6],[1,1860,174,12,"error"],[1,1861,175,4],[1,1862,175,5],[1,1870,176,6,"setIsLoading"],[1,1873,176,19],[1,1875,177,4],[1,1878,213,8,"logout"],[1,1885,180,17,"async"],[1,1895,181,4],[1,1905,182,12,"api"],[1,1907,182,15,"api"],[1,1911,182,16,"logout"],[1,1919,183,4],[1,1920,183,6],[1,1926,183,13,"error"],[1,1929,184,6,"console"],[1,1937,184,14,"error"],[1,1943,184,20],[1,1959,184,37,"error"],[1,1961,185,4],[1,1962,185,5],[1,1976,186,12],[1,1978,186,12,"removeAuthToken"],[1,1980,186,27,"removeAuthToken"],[1,1999,187,6,"setUser"],[1,2001,187,14],[1,2006,188,4],[1,2009,214,8,"refreshUser"],[1,2021,191,22,"async"],[1,2031,192,4],[1,2035,193,6],[1,2041,193,12,"userData"],[1,2049,193,29,"api"],[1,2051,193,32,"api"],[1,2055,193,33,"getMe"],[1,2063,194,6,"setUser"],[1,2065,194,14,"userData"],[1,2067,195,4],[1,2068,195,6],[1,2074,195,13,"error"],[1,2077,196,6,"console"],[1,2085,196,14,"error"],[1,2091,196,20],[1,2117,196,47,"error"],[1,2119,197,4],[1,2122,215,8,"updateUser"],[1,2133,200,22,"userData"],[1,2137,201,4,"setUser"],[1,2139,201,12,"userData"],[1,2144,216,8,"children"],[1,2153,218,7,"children"],[1,2156,221,0],[1,2158,223,0,"_e"],[1,2161,223,0,"useAuth"],[1,2169,223,7],[1,2180,224,2],[1,2186,224,8,"context"],[1,2189,224,18],[1,2191,224,18,"useContext"],[1,2193,224,28,"useContext"],[1,2205,224,29,"AuthContext"],[1,2208,225,2],[1,2216,225,18,"undefined"],[1,2220,225,6,"context"],[1,2222,226,4],[1,2228,226,10],[1,2232,226,14,"Error"],[1,2238,226,20],[1,2285,228,2],[1,2292,228,9,"context"],[1,2293,229,0],[1,2295,1,0],[1,2299,1,0,"_react"],[1,2301,1,0,"r"],[1,2303,1,0,"_d"],[1,2306,1,0],[1,2310,1,89,"r"],[1,2312,1,89,"_d"],[1,2315,1,89],[1,2319,3,0,"_interopNamespace"],[1,2321,3,0,"r"],[1,2323,3,0,"_d"],[1,2326,3,0],[1,2335,4,0,"Linking"],[1,2337,4,0,"_interopNamespace"],[1,2339,4,0,"r"],[1,2341,4,0,"_d"],[1,2344,4,0],[1,2349,5,0,"_utilsApi"],[1,2351,5,0,"r"],[1,2353,5,0,"_d"],[1,2356,5,0],[1,2360,5,80,"_reactJsxRuntime"],[1,2362,5,80,"r"],[1,2364,5,80,"_d"],[1,2367,5,80],[1,2371,20,0],[1,2377,20,6,"AuthContext"],[1,2380,20,20],[1,2382,20,20,"createContext"],[1,2384,20,33,"createContext"],[1,2404,20,63,"undefined"],[1,2407,22,6,"AUTH_URL"],[1,2409,22,17],[1,2442,23,6,"BACKEND_URL"],[1,2444,23,17],[1,2493,229,1],[1,2496]],"functionMap":{"names":["<global>","AuthProvider","extractSessionId","processSessionId","checkExistingSession","useEffect$argument_0","init","Linking.addEventListener$argument_1","<anonymous>","loginWithGoogle","loginWithEmail","register","logout","refreshUser","updateUser","useAuth"],"mappings":"AAA;OCwB;2BCI;GDY;2BEE;GFe;+BGE;GHY;YIE;iBCC;KDyB;yDEK;KFK;WGE;KHE;GJC;0BQE;GR2B;yBSE;GTe;mBUE;GVe;iBWE;GXS;sBYE;GZO;qBaE;GbE;CDmB;OeE;CfM"},"hasCjsExports":false},"type":"js/module"}]}